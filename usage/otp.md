# OTP 一次性密码

> OTP（One-Time Password）是一种基于时间的动态密码认证方式，每30秒自动生成一个新的6位数字密码，为您的账户提供额外的安全保障。

::: tip 提示
**建议所有用户启用OTP双因素认证，特别是管理员账户。**

支持的认证器应用：Google Authenticator、Microsoft Authenticator、Authy、1Password等
:::

## 功能特点

- **时间同步**：基于RFC 6238标准，采用TOTP算法
- **高安全性**：每30秒自动更新密码，防止重放攻击
- **离线使用**：无需网络连接即可生成验证码
- **多设备支持**：可在多个设备上同时配置

## 启用OTP

### 1. 进入个人中心

登录系统后，点击用户名称，选择"个人中心"。

### 2. 开启OTP验证

在菜单中找到"OTP双因素验证"选项。

### 3. 扫描二维码

使用手机上的认证器应用扫描屏幕上显示的二维码：

1. 打开认证器应用（如Google Authenticator）
2. 点击"添加账户"或"+"按钮
3. 选择"扫描二维码"
4. 对准屏幕上的二维码进行扫描

### 4. 手动输入密钥（备选方案）

如果无法扫描二维码，可以手动输入密钥：

1. 在认证器应用中选择"手动输入"
2. 输入显示的密钥字符串
3. 设置账户名称（建议使用服务名称）

### 5. 验证设置

输入认证器应用生成的6位验证码，点击"确认"完成设置。

## 登录使用

启用OTP后，登录时需要额外输入一次性密码：

1. 输入用户名和密码
2. 打开认证器应用
3. 找到对应的账户
4. 输入显示的6位验证码
5. 点击"登录"

::: warning 注意
- 验证码每30秒更新一次，请在有效期内使用
- 如果验证码即将过期，建议等待新的验证码生成后再输入
- 同一个验证码只能使用一次
:::

## 备份与恢复

### 备份恢复码

设置OTP时会生成一组恢复码，请妥善保存：

1. 下载并打印恢复码
2. 存储在安全的地方
3. 不要将恢复码存储在手机上

### 使用恢复码

如果无法获取OTP验证码，可以使用恢复码：

1. 在登录页面点击"使用恢复码"
2. 输入任意一个未使用的恢复码
3. 成功登录后请及时重新配置OTP

## 常见问题

### Q: 验证码一直提示错误怎么办？

A: 请检查以下几点：
- 确保设备时间同步正确
- 验证码未过期（30秒有效期）
- 输入的是当前显示的验证码
- 没有多次使用同一个验证码

### Q: 手机丢失或损坏如何处理？

A: 可以通过以下方式恢复：
1. 使用预先保存的恢复码登录
2. 联系管理员重置OTP设置
3. 重新设置OTP验证

### Q: 可以在多个设备上设置OTP吗？

A: 可以，扫描同一个二维码或使用同一个密钥，可以在多个设备上配置。

### Q: 如何关闭OTP验证？

A: 在个人设置中找到OTP验证选项，点击"禁用"即可关闭。

## 最佳实践

1. **定期备份**：定期检查恢复码是否安全保存
2. **多设备配置**：在多个设备上配置OTP，防止单点故障
3. **时间同步**：确保设备时间准确，避免验证失败
4. **安全存储**：妥善保管恢复码，避免泄露

::: tip 安全建议
- 不要在公共场所输入验证码
- 不要截图保存二维码或密钥
- 定期更新认证器应用
- 如发现异常登录，立即更换密码并重新设置OTP
:::
